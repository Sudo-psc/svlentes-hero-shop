/**
 * Sistema de Gerenciamento de √çcones - SV Lentes
 *
 * Este m√≥dulo centraliza todos os √≠cones do projeto, fornecendo:
 * - Tipagem TypeScript forte
 * - Categoriza√ß√£o l√≥gica
 * - Metadados para otimiza√ß√£o
 * - Sugest√µes de uso contextual
 */

export type IconCategory =
  | 'atendimento'
  | 'beneficios'
  | 'processos'
  | 'medico'
  | 'badges'
  | 'perfil';

export interface IconMetadata {
  /** Nome do arquivo do √≠cone */
  filename: string;
  /** Caminho relativo a partir de /public */
  path: string;
  /** Categoria funcional */
  category: IconCategory;
  /** Descri√ß√£o do uso recomendado */
  description: string;
  /** Tamanho recomendado em pixels */
  recommendedSize: {
    width: number;
    height: number;
  };
  /** Contextos sugeridos de uso */
  suggestedUse: string[];
  /** Alt text padr√£o para acessibilidade */
  defaultAlt: string;
}

/**
 * Cat√°logo completo de √≠cones dispon√≠veis
 */
export const ICONS: Record<string, IconMetadata> = {
  // ===== ATENDIMENTO E SUPORTE =====
  customerService: {
    filename: 'customer_service_icon.png',
    path: '/icones/customer_service_icon.png',
    category: 'atendimento',
    description: '√çcone de atendimento ao cliente via WhatsApp/Chat',
    recommendedSize: { width: 64, height: 64 },
    suggestedUse: ['se√ß√£o de contato', 'bot√£o de suporte', 'FAQ', 'header'],
    defaultAlt: 'Atendimento ao cliente SV Lentes'
  },

  atendimento24x7: {
    filename: 'icon_atend24:7.png',
    path: '/icones/icon_atend24:7.png',
    category: 'atendimento',
    description: '√çcone destacando disponibilidade 24/7',
    recommendedSize: { width: 80, height: 80 },
    suggestedUse: ['se√ß√£o de benef√≠cios', 'cards de vantagens', 'hero section'],
    defaultAlt: 'Atendimento 24 horas por dia, 7 dias por semana'
  },

  amorSaude: {
    filename: 'icon_amoresaude.png',
    path: '/icones/icon_amoresaude.png',
    category: 'atendimento',
    description: '√çcone representando cuidado e amor √† sa√∫de',
    recommendedSize: { width: 48, height: 48 },
    suggestedUse: ['se√ß√£o sobre n√≥s', 'valores da empresa', 'footer'],
    defaultAlt: 'Cuidado e amor com sua sa√∫de ocular'
  },

  // ===== BENEF√çCIOS E VANTAGENS =====
  shieldSecurity: {
    filename: 'blue_shield_checkmark_icon.png',
    path: '/icones/blue_shield_checkmark_icon.png',
    category: 'beneficios',
    description: 'Escudo de seguran√ßa com checkmark - garantia e confian√ßa',
    recommendedSize: { width: 72, height: 72 },
    suggestedUse: ['se√ß√£o de garantias', 'benef√≠cios', 'compliance LGPD'],
    defaultAlt: 'Seguran√ßa e garantia nos servi√ßos'
  },

  premiumQuality: {
    filename: 'diamond_and_star_icon.png',
    path: '/icones/diamond_and_star_icon.png',
    category: 'beneficios',
    description: 'Diamante com estrela - qualidade premium',
    recommendedSize: { width: 64, height: 64 },
    suggestedUse: ['planos premium', 'diferenciais', 'qualidade do produto'],
    defaultAlt: 'Qualidade premium garantida'
  },

  piggyBank: {
    filename: 'piggy_bank_with_dollar_coin.png',
    path: '/icones/piggy_bank_with_dollar_coin.png',
    category: 'beneficios',
    description: 'Cofrinho com moeda - economia e valor',
    recommendedSize: { width: 80, height: 80 },
    suggestedUse: ['calculadora de economia', 'compara√ß√£o de pre√ßos', 'benef√≠cios financeiros'],
    defaultAlt: 'Economia com assinatura de lentes'
  },

  calculator: {
    filename: 'colorful_calculator_icon.png',
    path: '/icones/colorful_calculator_icon.png',
    category: 'beneficios',
    description: 'Calculadora colorida - c√°lculo de economia',
    recommendedSize: { width: 64, height: 64 },
    suggestedUse: ['se√ß√£o calculadora', 'simulador de pre√ßos', 'CTA de economia'],
    defaultAlt: 'Calcule sua economia'
  },

  // ===== PROCESSOS E ENTREGA =====
  delivery: {
    filename: 'hand_holding_package_icon.png',
    path: '/icones/hand_holding_package_icon.png',
    category: 'processos',
    description: 'M√£o segurando pacote - entrega de lentes',
    recommendedSize: { width: 72, height: 72 },
    suggestedUse: ['se√ß√£o como funciona', 'processo de entrega', 'benef√≠cios log√≠sticos'],
    defaultAlt: 'Entrega de lentes em domic√≠lio'
  },

  location: {
    filename: 'cartoon-character-location-icon.png',
    path: '/icones/cartoon-character-location-icon.png',
    category: 'processos',
    description: 'Personagem com pin de localiza√ß√£o',
    recommendedSize: { width: 80, height: 80 },
    suggestedUse: ['√°rea de cobertura', 'localiza√ß√£o da cl√≠nica', 'mapa de atendimento'],
    defaultAlt: 'Localiza√ß√£o e √°rea de atendimento'
  },

  // ===== M√âDICO E CONSULTAS =====
  eyeCalendar: {
    filename: 'eye-calendar-icon.png',
    path: '/icones/eye-calendar-icon.png',
    category: 'medico',
    description: 'Olho com calend√°rio - agendamento de consultas',
    recommendedSize: { width: 72, height: 72 },
    suggestedUse: ['agendamento', 'consultas', 'acompanhamento m√©dico'],
    defaultAlt: 'Agende sua consulta oftalmol√≥gica'
  },

  eyeCheckAward: {
    filename: 'eye_check_award_icon.png',
    path: '/icones/eye_check_award_icon.png',
    category: 'medico',
    description: 'Exame oftalmol√≥gico com selo de qualidade',
    recommendedSize: { width: 80, height: 80 },
    suggestedUse: ['se√ß√£o m√©dica', 'exames', 'diferenciais cl√≠nicos'],
    defaultAlt: 'Exames oftalmol√≥gicos certificados'
  },

  // ===== BADGES E SELOS =====
  popularBadge: {
    filename: 'flaming_crown_popular_badge.png',
    path: '/icones/flaming_crown_popular_badge.png',
    category: 'badges',
    description: 'Coroa flamejante - plano mais popular',
    recommendedSize: { width: 56, height: 56 },
    suggestedUse: ['cards de planos', 'destaque de produtos', 'pricing'],
    defaultAlt: 'Plano mais popular'
  },

  anniversaryBadge: {
    filename: 'ten_year_anniversary_badge.png',
    path: '/icones/ten_year_anniversary_badge.png',
    category: 'badges',
    description: 'Selo de 10 anos - experi√™ncia e tradi√ß√£o',
    recommendedSize: { width: 64, height: 64 },
    suggestedUse: ['sobre n√≥s', 'credibilidade', 'footer', 'testimonials'],
    defaultAlt: '10 anos de experi√™ncia'
  },

  // ===== PERFIL =====
  drPhilipe: {
    filename: 'drphilipe_perfil.jpeg',
    path: '/icones/drphilipe_perfil.jpeg',
    category: 'perfil',
    description: 'Foto de perfil do Dr. Philipe Saraiva Cruz',
    recommendedSize: { width: 120, height: 120 },
    suggestedUse: ['sobre n√≥s', 'equipe m√©dica', 'testimonials', 'footer'],
    defaultAlt: 'Dr. Philipe Saraiva Cruz - CRM-MG 69.870'
  },

  userPin: {
    filename: 'Pin_icon_menino.png',
    path: '/icones/Pin_icon_menino.png',
    category: 'perfil',
    description: 'Avatar de usu√°rio - representa√ß√£o de cliente',
    recommendedSize: { width: 48, height: 48 },
    suggestedUse: ['√°rea do usu√°rio', 'perfil', 'testimonials'],
    defaultAlt: 'Usu√°rio SV Lentes'
  }
} as const;

/**
 * Helper para obter √≠cones por categoria
 */
export function getIconsByCategory(category: IconCategory): IconMetadata[] {
  return Object.values(ICONS).filter(icon => icon.category === category);
}

/**
 * Helper para obter caminho completo do √≠cone
 */
export function getIconPath(iconKey: keyof typeof ICONS): string {
  return ICONS[iconKey].path;
}

/**
 * Helper para obter alt text padr√£o
 */
export function getIconAlt(iconKey: keyof typeof ICONS): string {
  return ICONS[iconKey].defaultAlt;
}

/**
 * Tipo auxiliar para garantir uso correto das chaves de √≠cones
 */
export type IconKey = keyof typeof ICONS;
/**
 * Generic Icon component with error handling and fallback
 */
export function Icon({
  name,
  size = 24,
  className = '',
  alt,
  fallbackEmoji
}: IconProps & {
  name: IconKey;
  fallbackEmoji?: string;
}) {
  const [hasError, setHasError] = useState(false);
  const iconData = ICONS[name];

  if (!iconData) {
    console.warn(`Icon "${name}" not found in registry`);
    return fallbackEmoji ? <span className={ className }> { fallbackEmoji } </span> : null;
  }

  // If image failed to load, show emoji fallback
  if (hasError && (fallbackEmoji || iconData.emoji)) {
    return (
      <span 
        className= { className }
    style = {{ fontSize: size }
  }
  title = { alt || iconData.defaultAlt
}
      >
  { fallbackEmoji || iconData.emoji}
</span>
    );
  }

return (
  <div className= {`relative inline-block ${className}`} style = {{ width: size, height: size }}>
    <Image
        src={ iconData.path }
alt = { alt || iconData.defaultAlt}
fill
className = "object-contain"
sizes = "(max-width: 768px) 24px, 32px"
onError = {() => setHasError(true)}
      />
  </div>
  );
}

/**
 * Individual icon components with fallback support
 */
export function CalcIcon({ size = 24, className = '', alt }: IconProps) {
  return (
    <Icon 
      name= "calc"
  size = { size }
  className = { className }
  alt = { alt || "Calculadora de economia SVlentes"
}
fallbackEmoji = "üßÆ"
  />
  );
}

export function AtendidoIcon({ size = 24, className = '', alt }: IconProps) {
  return (
    <Icon 
      name= "atendido"
  size = { size }
  className = { className }
  alt = { alt || "5.000+ clientes satisfeitos"
}
fallbackEmoji = "üë•"
  />
  );
}

export function FortyPercentIcon({ size = 24, className = '', alt }: IconProps) {
  return (
    <Icon 
      name= "fortyPercent"
  size = { size }
  className = { className }
  alt = { alt || "40% de economia m√©dia"
}
fallbackEmoji = "üìä"
  />
  );
}

export function TwelveHIcon({ size = 24, className = '', alt }: IconProps) {
  return (
    <Icon 
      name= "twelveH"
  size = { size }
  className = { className }
  alt = { alt || "12 horas economizadas por ano"
}
fallbackEmoji = "‚è∞"
  />
  );
}

export function PiggyBankIcon({ size = 24, className = '', alt }: IconProps) {
  return (
    <Icon 
      name= "piggyBankStats"
  size = { size }
  className = { className }
  alt = { alt || "R$ 800 de economia m√©dia anual"
}
fallbackEmoji = "üí∞"
  />
  );
}