# ================================
# CHATBOT WHATSAPP - ENV VARIABLES
# ================================

# ============================================
# OpenAI Configuration (GPT-5 + Embeddings)
# ============================================
OPENAI_API_KEY=sk-proj-your-openai-api-key-here
OPENAI_MODEL=gpt-5-mini
# Nota: gpt-5-mini é uma versão mais rápida e econômica do GPT-5
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=1000

# ============================================
# Qdrant Vector Database
# ============================================
# Para produção (Qdrant Cloud):
QDRANT_URL=https://your-cluster.qdrant.io:6333
QDRANT_API_KEY=your-qdrant-api-key-here
# Para desenvolvimento (Docker local):
# QDRANT_URL=http://localhost:6333
# QDRANT_API_KEY=
QDRANT_COLLECTION=svlentes_conversations

# ============================================
# WhatsApp Business API (Meta Cloud API)
# ============================================
# Obter em: https://developers.facebook.com/apps
WHATSAPP_PHONE_NUMBER_ID=123456789012345
WHATSAPP_BUSINESS_ACCOUNT_ID=987654321098765
WHATSAPP_ACCESS_TOKEN=your-permanent-access-token-here
WHATSAPP_APP_SECRET=your-app-secret-for-webhook-verification
WHATSAPP_WEBHOOK_VERIFY_TOKEN=your-custom-verify-token-here
WHATSAPP_API_VERSION=v18.0

# Número do WhatsApp Business (formato: 5533998601427)
WHATSAPP_BUSINESS_NUMBER=5533998601427

# ============================================
# Database (PostgreSQL)
# ============================================
DATABASE_URL=postgresql://user:password@localhost:5432/svlentes
# Para produção (ex: Neon, Supabase):
# DATABASE_URL=postgresql://user:pass@host.region.neon.tech:5432/svlentes

# Pool de conexões
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ============================================
# Redis (Cache e Message Queue)
# ============================================
REDIS_URL=redis://localhost:6379
# Para produção (ex: Upstash):
# REDIS_URL=redis://:password@host.upstash.io:6379

# BullMQ Configuration
REDIS_QUEUE_PREFIX=svlentes-chatbot

# ============================================
# Application Settings
# ============================================
NODE_ENV=development
# Para produção: NODE_ENV=production

NEXT_PUBLIC_APP_URL=https://svlentes.com.br
# Para desenvolvimento: http://localhost:3000

# Port (se não for usar Next.js default)
PORT=3000

# ============================================
# Integrations
# ============================================

# Asaas Payment Gateway
ASAAS_ENV=sandbox
ASAAS_API_KEY_SANDBOX=your-sandbox-key
ASAAS_API_KEY_PROD=your-production-key

# Google Calendar (para agendamentos)
GOOGLE_CALENDAR_API_KEY=your-google-calendar-api-key
GOOGLE_CALENDAR_ID=your-calendar-id

# CRM Integration (opcional)
CRM_API_URL=https://api.crm.com
CRM_API_KEY=your-crm-api-key

# ============================================
# Monitoring & Observability
# ============================================

# Log Level (error, warn, info, debug)
LOG_LEVEL=info

# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn
SENTRY_ENVIRONMENT=development

# Prometheus Metrics (opcional)
PROMETHEUS_PORT=9090

# ============================================
# Security & Rate Limiting
# ============================================

# Rate Limiting
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# JWT Secret (se usar autenticação)
JWT_SECRET=your-jwt-secret-here

# ============================================
# Feature Flags
# ============================================

# Habilitar funcionalidades específicas
FEATURE_SALES_AGENT=true
FEATURE_SUPPORT_AGENT=true
FEATURE_SCHEDULING_AGENT=true
FEATURE_HUMAN_HANDOFF=true
FEATURE_PAYMENT_LINKS=true

# ============================================
# Chatbot Configuration
# ============================================

# Tempo máximo para resposta (segundos)
CHATBOT_RESPONSE_TIMEOUT=10

# Número máximo de mensagens no histórico
CHATBOT_MAX_HISTORY=10

# Ativar busca semântica no Qdrant
CHATBOT_SEMANTIC_SEARCH=true

# Threshold para handoff automático (0-1)
CHATBOT_HANDOFF_THRESHOLD=0.8

# ============================================
# Business Rules
# ============================================

# Horário comercial
BUSINESS_HOURS_START=8
BUSINESS_HOURS_END=18
BUSINESS_HOURS_TIMEZONE=America/Sao_Paulo

# Informações do médico
DOCTOR_NAME="Dr. Philipe Saraiva Cruz"
DOCTOR_CRM=65870
DOCTOR_SPECIALTY=Oftalmologia

# Planos disponíveis (JSON)
PLANS_CONFIG='{"mensal":{"price":179,"interval":"month"},"trimestral":{"price":499,"interval":"3months"},"semestral":{"price":899,"interval":"6months"}}'

# ============================================
# Webhooks & Callbacks
# ============================================

# URL base para webhooks (produção)
WEBHOOK_BASE_URL=https://svlentes.com.br

# Slack para notificações (opcional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Email para notificações
NOTIFICATION_EMAIL=saraivavision@gmail.com

# ============================================
# Development Only
# ============================================

# Ativar debug verbose
DEBUG=false

# Simular delays (ms) para testar timeouts
SIMULATE_DELAY=0

# Mock de APIs externas
MOCK_WHATSAPP_API=false
MOCK_OPENAI_API=false
MOCK_QDRANT_API=false
